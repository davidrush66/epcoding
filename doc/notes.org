* Structure of EP Coding
  - Procedure list
  - Page for each procedure
  - Loaded from strings.xml
  - laid out with Markdown/html
    Example
    |----------------------------+-------|
    | Single chamber PPM implant | 33207 |
    | Dual chamber PPM implant   | 33208 |
    |----------------------------+-------|
* Details    
* TODO
** Reorder secondary codes
   They should be generally in numeric order, but can also have some
   logical order.  It makes no sense to put the A line code in first,
   even though it comes numerically before the others.
** Write help texts
** DONE Put Settings in?
   - verbosity setting for coding summary
   - coding analysis warning levels?
   - ? toggle coding analysis
** DONE Bugs
   - rotation of screen loses check marks
* Settings screen
  - Settings
    - Code Display
      - Show + for add-on codes
      - Allow changing primary codes
    - Code Summary
      - Show + for add-on codes
      - Show code details
      - Code analysis verbosity
* Code analysis
** Errors and warnings
   - do not report 2D and 3D mapping together
   - 2D mapping and AV node ablation may not be allowed
   - Note clear if temp V pacer and AV node ablation can be billed
     together
   - Warm if no secondary codes chosen (unlikely AFB ablation done
     with mapping, eg.)
   - Warn if EP testing without arrhythmia induction coded
   - Disallow 93619 and 93620 together
   - Possibly do check for forbidden combinations in AllCodes
     (e.g. SVT ablation + additional AFB ablation)
   - No 76000 with any other device code
   - For removal and replacement of PPM and leads uses 33233 with
     33234 or 33235 and 33206-33208
   - Don't use 33206-33208 with 33227-33229
   - Don't use 33214 with 33227-33229
** Verbosity
*** Brief
    - Errors
      - 93609 & 93613
      - 93619 & 93620
      - All Addon codes
      - 93414 & 93621
    - Warnings
      - No secondary codes
      - No primary codes
      - ? No mapping codes with ablation codes
*** Verbose
    - Errors
      - 93619 & 93620: do not combine 2D and 3D mapping
      - All Addon codes: you must have some non-addon codes to use
        addon codes
    - Warnings
      - No secondary codes: you may be missing some secondary codes
      - No mapping codes: most ablation procedures include mapping
* Help notes
** Purpose
   - Only EP!!
   - Allow easy look-up of commonly used codes
   - Define common coding scenarios
   - Demonstrate which codes cannot be combined
   - Help with code entry by physician in EHR such as EPIC
   - Meant to help the EP physician do what is required by EHR
** Excluded
   - Office codes
   - Surgical codes
   - Device interrogation/follow-up codes
   - Modifiers
   - Code components
** Help Text Buffer Options
#+TITLE:     EP Coding Help
#+AUTHOR:    David Mann
#+EMAIL:     mannd@epstudiossoftware.com
#+DATE:      2014-02-08 Sat
#+DESCRIPTION:
#+KEYWORDS:
#+LANGUAGE:  en
#+OPTIONS:   H:3 num:nil toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+LINK_UP:   
#+LINK_HOME: 
#+XSLT:
** Help file creation
   - use C-c @ to select EP Coding Help headline
   - C-c C-e export to html, buffer
   - Save buffer to help.html
   - import into strings, or use as resource file
   - export html to assets/help.html
   - Note I have added (setq org-export-html-postamble nil) in
     ~/.emacs to suppress footer information.
   - Above group of statements in buffer are for formatting the HTML
** EP Coding Help
*** Who should use EP Coding?
    Physicians who perform cardiac electrophysiology (EP) procedures and
    are required to submit CPT® codes for these procedures.
*** Rationale
    EHR (Electronic Health Records) put added burdens on physicians to
    do tasks that in the past were done by ancillary personnel.  These
    responsibilites often now include proper coding of
    procedures.  Often physicians are required to enter CPT® codes
    directly into the computer.  This is difficult given the
    complexity of the codes and rules controlling them.
*** EP Coding is for physicians, not coders!
    Coding procedures nowadays often involves two stages.  Physicians
    enter codes into the EHR based on what they do during
    procedures.  Professional coders take the codes, assess if they
    are supported by proper documentation, add modifiers, and often
    adjust coding based on whether the patient has Medicare or other
    insurance.  EP Coding is intended to help the physician do the
    initial code entry and is not for professional coders!
*** How does EP Coding help?
    - Lists relevant CPT® codes for procedures, with succinct descriptions.
    - Makes clear which codes cannot be combined for specific procedures.
    - Analyzes selected codes for errors and warnings.
    - Provides Hints on how to code procedures.
*** How to use EP Coding
    - Select a procedure from the list.
    - Codes are organized as primary codes, at least one of which
      needs to be selected, and additional or optional codes which
      are commonly used with the procedure.
    - Click on the codes that are relevant.
    - Codes that should not be selected or must be selected are locked.
    - Click on *Summarize* to summarize and analyze the coding.
    - If code analysis is selected in *Settings* Warnings and Errors
      will be listed including the relevant codes in brackets, and, if
      the analyzer is set to Verbose, some further explanation.
    - Click the *Clear* button to clear the selected codes.  Codes are
      also cleared if you return to the procedure list or select
      another procedure.
    - Click the *Hints* button for coding hints.
    - Click the *Save* icon at the top to save your selection of
      additional codes.  If you nearly always select the same
      additional codes (e.g. always do 3D mapping with SVT ablation),
      select the codes and they will already be selected in future
      sessions.
    - Click the *Settings* to change the display of codes and level of
      detail shown in the code analysis dialog.
    - The *All Codes* module just lists every code
      in numerical order.  It is the /a la carte/ menu of EP Coding.
      No code analysis is performed in this module.
** Hints
*** Ablation Hints
    Catheter ablation procedures are coded with a primary ablation
    code.  This code includes comprehensive electrophysiologic
    testing, which should not be coded separately.  However other
    components, such as mapping, can be coded for AFB and SVT
    ablations, but not for VT ablations.  EP Coding disables codes
    that can\'t be combined.  Note that atrial flutter and atrial
    tachycardia ablation is coded as an SVT ablation.  Also note that
    for AFB ablation, there are add-on codes for additional ablation
    besides pulmonary vein isolation for AFB (such as linear atrial
    ablation, 93657) and ablation of additional arrhythmia mechanisms (such
    as focal atrial tachycardia, 93655).
*** AFB Ablation
    AFB ablation includes comprehensive EP testing, including LA
    recording and pacing.  It also includes transseptal
    catheterization, therefore these codes cannot be added on.
    Mapping codes and coding for programmed stimulation after IV drug
    infusion can be added.  The primary code includes pulmonary vein
    isolation.  Add code 93657 if additional ablation for AFB is done
    (such as linear atrial ablation) and add 93655 if a separate
    arrhythmia mechanism is ablated (such as focal atrial
    tachycardia).
*** AV node ablation
    It is not clear if electrophysiologic testing and mapping can be
    billed as additional codes to AV node ablation.  Often AV node
    ablation is combined with device implant at the same setting and
    these codes should be added.
*** SVT ablation
    SVT ablation includes comprehensive EP testing, but can be
    combined with the other codes listed.  Note that the SVT ablation
    code (93653) is used not just for supraventricular tachycardia,
    but for WPW ablation, atrial flutter ablation, atrial tachycardia
    ablation, and presumably premature atrial complex ablation.
*** VT ablation
    Mapping codes (93609 or 93613), for reasons only known to the
    AMA, cannot be combined with the 93654 VT ablation code.
    This is unlike the AFB and SVT ablation codes.  LV pacing and
    recording also cannot be combined with VT ablation.
* Limitations
  - Code descriptions are paraphrased
  - All information freely available on web
  - Not for trained coders
  - Physician and coder must still be familiar with components and
    document properly and completely
* More buttons
** Generator change
   - PPM
     - A lead
     - V lead
     - dual chamber
     - CRT
** Possible buttons
   |--------+--------|
   | PPM    | ICD    |
   | A lead | V lead |
   | dual   | CRT    |
   |--------+--------|
** Buttons aren't needed, we have separate PPM and ICD modules already
* Rules and Regulations
** Bibliography						   
*** CPT symposium 2011 slides					    :cpt2011:
*** CPT review 2013 slides 					    :cpt2013:
*** CPT coding changes 2013				     :cptchanges2013:
*** EP Lab digest Changes Coming 2012				  :eplab2012:
*** https://www.aapc.com/memberarea/forums/showthread.php?t=19874     :links:
** Devices
*** 93640, 93641 reportable at time of device placement/replacememnt :cpt2011:
     This is DFT testing.  93640 is for external testing of leads
     with and analyzer and isn't in Codes.java.	
*** Use 76000 for fluoro of leads (e.g. Riata)			    :cpt2011:
*** Use 33224 to insert LV lead alone?				    :cpt2011:
*** Upgrade single to dual PPM 33214 includes gen removal	    :cpt2011:
*** Upgrade single to dual ICD 33241 & 33249			    :cpt2011:
*** Extraction and replacement PPM and leads
**** codes							    :cpt2011:
     33223 (remove gen) with 33234 or 33235 (remove 1 or 2 leads) and
     then 33206-33208 for new generator.  Don't use 33206-33208 with
     generator replacement codes (33227-33229)
**** 33212, 33213, 33221 single, dual, multi gen insertion only	    :cpt2011:
     don't combine insertion with 33233 for removal.  Use 33227-33229
     (replacement codes) only.
**** 33214 upgrade single to dual ppm				    :cpt2011:
     - includes removal of prior generator, with new gen and leads.
     - Don't report with 33227-33229 (replacement only)
**** Repair 33218, 33220 (single, dual lead repair)		    :cpt2011:
     - PPM or ICD leads
     - Use with generator replacements
***** TODO Add to Additional codes for generator change, upgrade
**** 33226 Repositioning of LV lead				    :cpt2011:
     ? Includes removal, insertion and/or replacement of existing generator
**** 33227-33229						    :cpt2011:
     - replacement codes
     - Don't report with 33233 (removal)
     - report with 33206-33208 (new systems) and 33234, 33235 (lead
       removal) for upgrades.
*** ICD codes
**** 33240, 33230, 33231					    :cpt2011:
     - 33240 ICD gen only with existing single lead
     - 33230 --- with existing dual leads
     - 33231 --- with existing multi leads
     - Don't report with generator change out at the same time, use
       33262-33264 (ICD gen change, single, dual, CRT)
**** 33241							    :cpt2011:
     - removal of any kind of ICD generator only
     - use with 33243 or 33244 (ICD lead removal by thoracotomy - not
       in EP Coding - or transvenously) and 33249 placement of new ICD
       with leads (single or dual) for removal and replacement of ICD
       generator and electrodes.
**** ICD generator change alone					    :cpt2011:
     - 33262 single lead generator
     - 33263 dual lead gen
     - 33264 multi lead gen
     - Don't use 33262-33264 with 33241 (i.e. don't bill removal and
       replacement)
     - Removal of lead(s) and replacement use 33244 (extraction ICD
       lead) and 33241 (remove generator) or ICD replacement
       33262-33264. (e.g. you take out a lead, and downgrade the device)
     - 33249.  Insert/ replace single, dual ICD system including leads.
     - For lead removal and replacement use 33241 with 33243 and 33249.
*** Simplified table						    :cpt2011:
    |---------------------------+---------------+---------------|
    | Procedure                 |           PPM |           ICD |
    | insert 1 lead             |         33216 |         33216 |
    | insert 2 leads            |         33217 |         33217 |
    | insert 3 leads            | 33217 & 33224 | 33217 & 33224 |
    |---------------------------+---------------+---------------|
    | remove 1 lead             |         33234 |         33244 |
    | remove 2 leads            |         33235 |         33244 |
    |---------------------------+---------------+---------------|
    | gen with existing 1 lead  |         33212 |         33240 |
    | gen with existing 2 leads |         33213 |         33230 |
    | gen with existing 3 leads |         33221 |         33231 |
    |---------------------------+---------------+---------------|
    | gen replacement 1 lead    |         33227 |         33262 |
    | gen replacement 2 leads   |         33228 |         33263 |
    | gen replacement 3 leads   |         33229 |         33264 |
    |---------------------------+---------------+---------------|
    | gen removal only          |         33233 |         33241 |
    |---------------------------+---------------+---------------|
    | new/repl gen with 1 lead  |   33206/33207 |         33249 |
    | new/repl gen with 2 leads |         33208 |         33249 |
    | new/repl gen with 3 leads | 33208 & 33225 | 33249 & 33225 |
    |---------------------------+---------------+---------------|
    | upgrade sing to dual sys  |         33214 | 33241 & 33249 |
    |---------------------------+---------------+---------------|
    | removal gen               |         33233 |         33241 |
    | removal leads             |   33234/33235 |         33244 |
    | CS lead placed            |         33225 |         33225 |
    |---------------------------+---------------+---------------|
** EP
*** Ablation							    :cpt2013:
    - 93653-93657 (ablations) can't have EP procedure codes reported separately
    - Note this doesn't include 93650, AV node ablation
    - Don't report 93621 (LA pacing) with 93656 (afb ablation)
    - Don't use 93622 (LV pacing) with 93654 (VT ablation)
*** More ablation					     :cptchanges2013:
    - AFB ablation includes transseptal puncture (93462) and includes
      93621 (LA pacing/recording)
    - Don't report 2D and 3D mapping together
    - Don't report multiple ablation codes together
*** More						    :eplab2012:links:
    - Maybe can't bill IV drug infusion with ablation codes
    - comment mentions denials for 93650 (AVN ablation) and 93609 (2D
      mapping), but says nothing in the "book" indicates it is not
      allowed.  Note on Internet several have asked this question and
      no definitive answer.  Needs to be a WARNING.
    - Note that it appears that other EP procedures may be billable
      with AV node ablation, even His bundle recording.  Needs to be
      a WARNING
*** But							     :cptchanges2013:
    - Latest 2014 parentheticals OK to bill IV drug infusion with
      ablation codes

** General Help
*** Surgical codes not included (e.g. epicardial electrodes 33202)
*** We paraphrase code descriptions
**** e.g. use CRT system instead of "multi-lead" system
*** Sources are published on web, seminars, will be on web site
*** Most of the rules are enforced in the module interface, some in code analysis
*** Older/Obsolete/little used codes are not included
** Coding the rules
*** Patterns
**** Pairs of mutually exclusive codes
     e.g. ILR implant and ILR explant, internal and external CDVN
**** Triples of exclusive codes
     e.g. PPM with 1 lead, with 2 leads, with multi leads
**** Specific situations
     e.g. EP testing with AV node ablation, mapping with AV node ablation.
*** Indicating rules
**** Prohibited by module
     forbidden codes not enabled
**** Warnings and Errors with Code Analysis
     mutually exclusive codes
**** Hints
     Complex procedures like upgrades, lead replacements
*** Warning/Error messages
**** Mutually excluded pairs
     ! [99999, 99998]
**** Triples
***** ? indicate all combinations, or just one
      a) ! [99999, 99997]
      b) ! [99999, 99997, 99996]
      c) ! [99999, 99997] [99997, 99996] [99999, 99996]
      Best solution probably a to indicate one pair, and b for all three. 
***** check for 2/3 or 2/4 codes and specific warning
      e.g. ! [99999, 99998] multiple mutually exclusive EP codes, implant codes.
*** Coding
**** Combos (pairs)
     List<Combo> badCombos
     Set<String> codeNumbers
**** Triples
**** TODO Option for no code analysis in Settings
     
